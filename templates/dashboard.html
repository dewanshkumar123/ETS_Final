{% extends "base.html" %}
{% block title %}Dashboard - Lecture Companion{% endblock %}

{% block content %}
<div class="dashboard">
  {% if role == "teacher" %}
    <section class="panel panel-wide">
      <h2>Create new lecture</h2>
      <p class="panel-subtitle">
        Paste a transcript for now. Later you can connect real speech to text.
      </p>
      <form method="post" action="{{ url_for('create_lecture') }}" class="form">
        <label>
          Lecture title
          <input type="text" name="title" required />
        </label>
        <label>
          Course name
          <input type="text" name="course" placeholder="e.g. CS 301 - Software Engineering" required />
        </label>
        <label>
          Transcript
          <textarea name="transcript" rows="8" required></textarea>
        </label>
        <button type="submit" class="btn btn-full">Generate notes</button>
      </form>
    </section>

    <section>
      <h2>Your lectures</h2>
      {% if courses %}
        <div class="courses-list">
          {% for course_name, course_lectures in courses.items() %}
          <div class="course-group">
            <h3><a href="{{ url_for('course_view', course_name=course_name) }}" class="course-title">{{ course_name }}</a></h3>
          </div>
          {% endfor %}
        </div>
      {% else %}
        <p>No lectures yet.</p>
      {% endif %}
    </section>

  {% else %}
    <section class="panel">
      <h2>Available lectures</h2>
      {% if courses %}
        <div class="courses-list">
          {% for course_name, course_lectures in courses.items() %}
          <div class="course-group">
            <h3 class="course-title" onclick="toggleLectures('{{ course_name }}')">{{ course_name }}</h3>
            <ul class="list" id="lectures-{{ course_name }}" style="display: none;">
              {% for lecture in course_lectures %}
              <li class="list-item">
                <div>
                  <h3>{{ lecture.title }}</h3>
                  <span class="list-meta">Created by {{ lecture.created_by }}</span>
                </div>
                <a href="{{ url_for('lecture_view', lecture_id=lecture.id) }}" class="btn btn-outline-small">
                  View
                </a>
              </li>
              {% endfor %}
            </ul>
          </div>
          {% endfor %}
        </div>
      {% else %}
        <p>No lectures have been added yet.</p>
      {% endif %}
    </section>
  {% endif %}
</div>
{% endblock %}
